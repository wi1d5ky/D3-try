<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>D3.js</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <style>
        body {
            background-color: #fff;
        }

        .wrapper svg {
            display: block;
            height: auto;
            width: 500px;
            border: 1px solid #343434;
        }

        .wrapper svg g {
            display: block;
        }

        #val {
            display: inline-block;
            margin-bottom: 1em;
            padding: 1em;
            width: auto;
            border: 1px solid #343434;
        }

        .btn {
            display: inline-block;
            margin: .5em;
            border: 1px solid #343434;
        }

        /**
        =====================================================================
        The code below is from
        http://brennaobrien.com/blog/2014/05/style-input-type-range-in-every-browser.html
        =====================================================================
        **/

        input[type=range] {
            /*removes default webkit styles*/
            -webkit-appearance: none;

            /*fix for FF unable to apply focus style bug */
            //border: 1px solid white;

            /*required for proper track sizing in FF*/
            width: 100px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100px;
            height: 5px;
            background: #ddd;
            border: none;
            border-radius: 3px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            border: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #00aa00;
            margin-top: -4px;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #ccc;
        }

        input[type=range]::-moz-range-track {
            width: 100px;
            height: 5px;
            background: #ddd;
            border: none;
            border-radius: 3px;
        }
        input[type=range]::-moz-range-thumb {
            border: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #00aa00;
        }

        /*hide the outline behind the border*/
        input[type=range]:-moz-focusring{
            outline: 1px solid white;
            outline-offset: -1px;
        }

        input[type=range]::-ms-track {
            width: 100px;
            height: 5px;

            /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
            background: transparent;

            /*leave room for the larger thumb to overflow with a transparent border */
            border-color: transparent;
            border-width: 6px 0;

            /*remove default tick marks*/
            color: transparent;
        }
        input[type=range]::-ms-fill-lower {
            background: #777;
            border-radius: 10px;
        }
        input[type=range]::-ms-fill-upper {
            background: #ddd;
            border-radius: 10px;
        }
        input[type=range]::-ms-thumb {
            border: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #00aa00;
        }
        input[type=range]:focus::-ms-fill-lower {
            background: #888;
        }
        input[type=range]:focus::-ms-fill-upper {
            background: #ccc;
        }

        /**=================================================================**/

    </style>
</head>
<body>
    <h1>Playground for d3.js</h1>
    <p>This is a playground for d3.js</p>

    <div id="val">
        <label for="num1">Num1: </label>
        <input type="range" id="num1" min="0" max="200" class="num" />
        <label for="num2">Num2: </label>
        <input type="range" id="num2" min="0" max="200" class="num" />
        <label for="num3">Num3: </label>
        <input type="range" id="num3" min="0" max="200" class="num" />
        <label for="num4">Num4: </label>
        <input type="range" id="num4" min="0" max="200" class="num" />
        <label for="num5">Num5: </label>
        <input type="range" id="num5" min="0" max="200" class="num" />
        <button onclick="javascript:cal()" class="btn">try it!</button>
    </div>

    <div class="wrapper">
        <svg></svg>
    </div>
</body>
</html>

<script>

    cal();

    function Max(a)
    {
        var max=0;
        for (var i = 0; i < a.length; i++) {
            if(a[i]>max) max=a[i];
        }
        return max;
    }

    function cal()
    {
        var array = document.getElementsByClassName('num');
        var data=[];

        for (var i = 0; i < array.length; i++) {
            data[i] = Number(array[i].value);
        }

        /* the size of the graph*/
        var height = Max(data) + 50;
        var width = 500;

        /* the width of each bar */
        var columnSpan = width / (data.length * 2 + 1);

        d3.select('.wrapper').select("svg").html("");

        var svg = d3.select('.wrapper').select("svg").append('g')
            .attr('height', height)
            .attr('width', 500)
            .attr('fill', 'grey');

        svg.selectAll('rect').data(data).enter().append('rect')
            .attr('fill','#00cc00')
            .attr('height', function(value, index) {return value;})
            .attr('width', columnSpan)
            .attr('x', function(value, index) {return index * columnSpan * 2 + columnSpan;})
            .attr('y', function(value) {return height - value;});

        d3.select('.wrapper > svg').attr('height', height);
    }
</script>
